<!DOCTYPE html>
<html lang="<%= locale %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= __('app.title') %></title>
    <link rel="icon" type="image/x-icon" href="/images/favicon/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!-- App CSS -->
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/terminal.css">

    <!-- JS Libraries -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>

    <!-- i18n para JavaScript frontend -->
    <script>
        window.i18n = {
            locale: '<%= locale %>',
            translations: <%- JSON.stringify({
                nav: __('nav'),
                table: __('table'),
                terminal: __('terminal'),
                validation: __('validation'),
                confirm: __('confirm'),
                errors: __('errors'),
                buttons: __('buttons'),
                connection: __('connection'),
                responseTypes: __('responseTypes'),
                httpCodes: __('httpCodes'),
                import: __('import')
            }) %>
        };

        // Helper function para traducciones en JS
        function t(key, params = {}) {
            const keys = key.split('.');
            let value = window.i18n.translations;
            for (const k of keys) {
                if (value && typeof value === 'object' && k in value) {
                    value = value[k];
                } else {
                    return key;
                }
            }
            if (typeof value === 'string') {
                Object.entries(params).forEach(([param, val]) => {
                    value = value.replace(new RegExp(`{{${param}}}`, 'g'), val);
                });
            }
            return value || key;
        }
    </script>
</head>
<body>
    <%- include('../partials/header.ejs') %>
    <main><%- body %></main>
    <%- include('../partials/footer.ejs') %>
</body>
</html>
